CREATE SCHEMA AUTHORIZATION pat;
CREATE TABLE PAT_CONNECTIONS(ID VARCHAR(255) NOT NULL PRIMARY KEY,CATALOG text, CONNECTONSTARTUP BOOLEAN NOT NULL,DRIVERCLASSNAME text, NAME text, PASSWORD text, SCHEMADATA text, TYPE bytea,URL text, USERNAME VARCHAR(255));
CREATE TABLE PAT_GROUPS(NAME VARCHAR(255) NOT NULL PRIMARY KEY);
CREATE TABLE PAT_GROUPS_USERS(GROUP_ID VARCHAR(255) NOT NULL,USER_ID VARCHAR(255) NOT NULL,CONSTRAINT FKA28DF9F917DC5D1F FOREIGN KEY(GROUP_ID) REFERENCES PAT_GROUPS(NAME));
CREATE TABLE PAT_QUERIES(ID VARCHAR(255) NOT NULL PRIMARY KEY,CONNECTIONID VARCHAR(255),CUBE bytea,CUBENAME VARCHAR(255),NAME VARCHAR(255),QUERYID VARCHAR(255),QUERYTYPE INTEGER,UPDATEDDATE TIMESTAMP,USERNAME VARCHAR(255),XML VARCHAR(255));
CREATE TABLE PAT_USERS(USERNAME VARCHAR(255) NOT NULL PRIMARY KEY,ENABLED BOOLEAN NOT NULL,PASSWORD VARCHAR(255));
CREATE TABLE PAT_USERS_CONNECTIONS(USER_ID VARCHAR(255) NOT NULL,CONNECTION_ID VARCHAR(255) NOT NULL,PRIMARY KEY(USER_ID,CONNECTION_ID),CONSTRAINT SYS_CT_55 UNIQUE(CONNECTION_ID),CONSTRAINT FKC0556CA218155D75 FOREIGN KEY(USER_ID) REFERENCES PAT_USERS(USERNAME),CONSTRAINT FKC0556CA2FB166866 FOREIGN KEY(CONNECTION_ID) REFERENCES PAT_CONNECTIONS(ID));
CREATE TABLE PAT_USERS_QUERIES(USER_ID VARCHAR(255) NOT NULL,QUERY_ID VARCHAR(255) NOT NULL,PRIMARY KEY(USER_ID,QUERY_ID),CONSTRAINT SYS_CT_59 UNIQUE(QUERY_ID),CONSTRAINT FKCA469D3318155D75 FOREIGN KEY(USER_ID) REFERENCES PAT_USERS(USERNAME),CONSTRAINT FKCA469D33C76E1DCE FOREIGN KEY(QUERY_ID) REFERENCES PAT_QUERIES(ID));
ALTER TABLE PAT_GROUPS_USERS ADD CONSTRAINT FKA28DF9F918155D75 FOREIGN KEY(USER_ID) REFERENCES PAT_USERS(USERNAME);
CREATE USER SA PASSWORD '';
CREATE USER HIBUSER PASSWORD 'PASSWORD';
CREATE USER PENTAHO_USER PASSWORD 'PASSWORD';
GRANT pat TO SA;
GRANT pat TO HIBUSER;
GRANT pat TO PENTAHO_USER;
-- INSERT INTO PAT_CONNECTIONS VALUES('267d4b3b-cd8d-435b-9a71-de95730a6545',NULL,TRUE,'org.hsqldb.jdbcDriver','SampleData - Mondrian',NULL,'<?xml version="1.0"?>\u000d\u000a<Schema name="SampleData">\u000d\u000a<!-- Shared dimensions -->\u000d\u000a\u000d\u000a  <Dimension name="Region">\u000d\u000a    <Hierarchy hasAll="true" allMemberName="All Regions">\u000d\u000a      <Table name="QUADRANT_ACTUALS"/>\u000d\u000a      <Level name="Region" column="REGION" uniqueMembers="true"/>\u000d\u000a    </Hierarchy>\u000d\u000a  </Dimension>\u000d\u000a  <Dimension name="Department">\u000d\u000a    <Hierarchy hasAll="true" allMemberName="All Departments">\u000d\u000a      <Table name="QUADRANT_ACTUALS"/>\u000d\u000a      <Level name="Department" column="DEPARTMENT" uniqueMembers="true"/>\u000d\u000a    </Hierarchy>\u000d\u000a  </Dimension>\u000d\u000a\u000d\u000a  <Dimension name="Positions">\u000d\u000a    <Hierarchy hasAll="true" allMemberName="All Positions">\u000d\u000a      <Table name="QUADRANT_ACTUALS"/>\u000d\u000a      <Level name="Positions" column="POSITIONTITLE" uniqueMembers="true"/>\u000d\u000a    </Hierarchy>\u000d\u000a  </Dimension>\u000d\u000a\u000d\u000a  <Cube name="Quadrant Analysis">\u000d\u000a    <Table name="QUADRANT_ACTUALS"/>\u000d\u000a    <DimensionUsage name="Region" source="Region"/>\u000d\u000a    <DimensionUsage name="Department" source="Department" />\u000d\u000a    <DimensionUsage name="Positions" source="Positions" />\u000d\u000a    <Measure name="Actual" column="ACTUAL" aggregator="sum" formatString="#,###.00"/>\u000d\u000a    <Measure name="Budget" column="BUDGET" aggregator="sum" formatString="#,###.00"/>\u000d\u000a    <Measure name="Variance" column="VARIANCE" aggregator="sum" formatString="#,###.00"/>\u000d\u000a<!--    <CalculatedMember name="Variance Percent" dimension="Measures" formula="([Measures].[Variance]/[Measures].[Budget])*100" /> -->\u000d\u000a  </Cube>\u000d\u000a\u000d\u000a</Schema>\u000d\u000a','aced00057372002f6f72672e70656e7461686f2e7061742e7365727665722e646174612e706f6a6f2e436f6e6e656374696f6e5479706500000000000000010200014c00046e616d657400124c6a6176612f6c616e672f537472696e673b78707400084d6f6e647269616e','jdbc:hsqldb:hsql://localhost/sampledata','sa');
-- INSERT INTO PAT_CONNECTIONS VALUES('dee72b05-2c14-443d-8639-2a248b542630',NULL,TRUE,'org.hsqldb.jdbcDriver','SteelWheels - Mondrian',NULL,'<Schema name="SteelWheels">\u000d\u000a\u0009<Cube name="SteelWheelsSales" cache="true" enabled="true">\u000d\u000a\u0009\u0009<Table name="ORDERFACT">\u000d\u000a\u0009\u0009</Table>\u000d\u000a\u0009\u0009<Dimension foreignKey="CUSTOMERNUMBER" name="Markets">\u000d\u000a\u0009\u0009\u0009<Hierarchy hasAll="true" allMemberName="All Markets" primaryKey="CUSTOMERNUMBER" primaryKeyTable="">\u000d\u000a\u0009\u0009\u0009\u0009<Table name="CUSTOMER_W_TER">\u000d\u000a\u0009\u0009\u0009\u0009</Table>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Territory" column="TERRITORY" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Country" column="COUNTRY" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="State Province" column="STATE" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="City" column="CITY" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009</Hierarchy>\u000d\u000a\u0009\u0009</Dimension>\u000d\u000a\u0009\u0009<Dimension foreignKey="CUSTOMERNUMBER" name="Customers">\u000d\u000a\u0009\u0009\u0009<Hierarchy hasAll="true" allMemberName="All Customers" primaryKey="CUSTOMERNUMBER">\u000d\u000a\u0009\u0009\u0009\u0009<Table name="CUSTOMER_W_TER">\u000d\u000a\u0009\u0009\u0009\u0009</Table>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Customer" column="CUSTOMERNAME" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009</Hierarchy>\u000d\u000a\u0009\u0009</Dimension>\u000d\u000a\u0009\u0009<Dimension foreignKey="PRODUCTCODE" name="Product">\u000d\u000a\u0009\u0009\u0009<Hierarchy name="" hasAll="true" allMemberName="All Products" primaryKey="PRODUCTCODE" primaryKeyTable="PRODUCTS" caption="">\u000d\u000a\u0009\u0009\u0009\u0009<Table name="PRODUCTS">\u000d\u000a\u0009\u0009\u0009\u0009</Table>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Line" table="PRODUCTS" column="PRODUCTLINE" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Vendor" table="PRODUCTS" column="PRODUCTVENDOR" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Product" table="PRODUCTS" column="PRODUCTNAME" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009</Hierarchy>\u000d\u000a\u0009\u0009</Dimension>\u000d\u000a\u0009\u0009<Dimension type="TimeDimension" foreignKey="TIME_ID" name="Time">\u000d\u000a\u0009\u0009\u0009<Hierarchy hasAll="true" allMemberName="All Years" primaryKey="TIME_ID">\u000d\u000a\u0009\u0009\u0009\u0009<Table name="DIM_TIME">\u000d\u000a\u0009\u0009\u0009\u0009</Table>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Years" column="YEAR_ID" type="String" uniqueMembers="true" levelType="TimeYears" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Quarters" column="QTR_NAME" ordinalColumn="QTR_ID" type="String" uniqueMembers="false" levelType="TimeQuarters" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Months" column="MONTH_NAME" ordinalColumn="MONTH_ID" type="String" uniqueMembers="false" levelType="TimeMonths" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009</Hierarchy>\u000d\u000a\u0009\u0009</Dimension>\u000d\u000a\u0009\u0009<Dimension foreignKey="STATUS" name="Order Status">\u000d\u000a\u0009\u0009\u0009<Hierarchy hasAll="true" allMemberName="All Status Types" primaryKey="STATUS">\u000d\u000a\u0009\u0009\u0009\u0009<Level name="Type" column="STATUS" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">\u000d\u000a\u0009\u0009\u0009\u0009</Level>\u000d\u000a\u0009\u0009\u0009</Hierarchy>\u000d\u000a\u0009\u0009</Dimension>\u000d\u000a\u0009\u0009<Measure name="Quantity" column="QUANTITYORDERED" formatString="#,###" aggregator="sum">\u000d\u000a\u0009\u0009</Measure>\u000d\u000a\u0009\u0009<Measure name="Sales" column="TOTALPRICE" formatString="#,###" aggregator="sum">\u000d\u000a\u0009\u0009</Measure>\u000d\u000a\u0009</Cube>\u000d\u000a</Schema>\u000d\u000a','aced00057372002f6f72672e70656e7461686f2e7061742e7365727665722e646174612e706f6a6f2e436f6e6e656374696f6e5479706500000000000000010200014c00046e616d657400124c6a6176612f6c616e672f537472696e673b78707400084d6f6e647269616e','jdbc:hsqldb:hsql://localhost/sampledata','sa');
-- INSERT INTO PAT_CONNECTIONS VALUES('e5a2adff-a223-404f-bf96-6b5aca8af226',NULL,FALSE,NULL,'Local Pentaho XML/A','password','','aced00057372002f6f72672e70656e7461686f2e7061742e7365727665722e646174612e706f6a6f2e436f6e6e656374696f6e5479706500000000000000010200014c00046e616d657400124c6a6176612f6c616e672f537472696e673b7870740004584d4c41','http://localhost:8080/pentaho/Xmla','joe');
INSERT INTO PAT_GROUPS VALUES('Administrators');
INSERT INTO PAT_GROUPS VALUES('Users');
INSERT INTO PAT_USERS VALUES('admin',TRUE,'admin');
INSERT INTO PAT_GROUPS_USERS VALUES('Administrators','admin');
INSERT INTO PAT_GROUPS_USERS VALUES('Users','admin');
-- INSERT INTO PAT_USERS_CONNECTIONS VALUES('admin','267d4b3b-cd8d-435b-9a71-de95730a6545');
-- INSERT INTO PAT_USERS_CONNECTIONS VALUES('admin','dee72b05-2c14-443d-8639-2a248b542630');
-- INSERT INTO PAT_USERS_CONNECTIONS VALUES('admin','e5a2adff-a223-404f-bf96-6b5aca8af226');
